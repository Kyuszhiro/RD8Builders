<!DOCTYPE html>
<html>
<head>
  <title>Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
  <h2>Live Tracker (You)</h2>

  <script>
    const socket = io();
    const username = prompt("Enter your name");

    function sendLocation(pos) {
      const data = {
        name: username,
        lat: pos.coords.latitude,
        lng: pos.coords.longitude
      };
      console.log("üìç Sending GPS location:", data);
      socket.emit('locationUpdate', data);
    }

    function onLocationError(err) {
      console.error("‚ö†Ô∏è Location error:", err);
      alert("Location error: " + err.message);
    }

    if ('geolocation' in navigator) {
      navigator.geolocation.watchPosition(
        sendLocation,
        onLocationError,
        {
          enableHighAccuracy: true,
          timeout: 5000,
          maximumAge: 0
        }
      );
    } else {
      alert("Geolocation not supported.");
    }
  </script>
</body>
</html>
